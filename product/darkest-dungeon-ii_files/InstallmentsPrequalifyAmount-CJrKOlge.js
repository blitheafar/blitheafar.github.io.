var e,t;import{c as o}from"./client-9ABcfG16.js";import{g as n}from"./browser-JcP66G1p.js";import{U as r,A as s}from"./AnalyticsProvider-DjlxoO0L.js";import{u as a}from"./useResizeObserver-D64kZ-fE.js";import{y as l,A as i,q as u,T as m}from"./checkout-BRO-eHrb.js";import{c}from"./account-rlVNNhOe.js";import{u as d}from"./usePostMessage-BcKF2YQX.js";import{M as f}from"./Money-CvuJgZJj.js";import{u as p}from"./usePrequalMetaData-DQHbE2nN.js";import{u as y}from"./jsxRuntime.module-B05noSNU.js";import"./constants-DdYdxyI6.js";import"./formatMoney-kgZkg0r5.js";const g="_Container_1u0wo_103";const v={format:"${{amount_no_decimals}}",decimal_mark:".",thousands_separator:","};function h({targetOrigin:e,error:t}){const{userFound:o,prequalifiedAmount:n,userInstallmentsOnboarded:r}=p(),s=i(null),{messageResized:h,messageLoaded:F,messageError:S,messageCustomFlowSideEffect:j}=d(e,!1),w=u(e=>j({flow:"prequal",shopPayInstallmentsOnboarded:Boolean(r),fontAssetLoaded:e}),[j,r]);a({ref:s,onResize:({width:e,height:t})=>{e&&t&&h({width:e,height:t})}});const _=m(()=>t?{message:t,code:c.PreqaulAmountError}:(null==n?void 0:n.value)?null:{message:"no_prequalification_amount_available",code:c.PreqaulAmountError},[t,null==n?void 0:n.value]);l(()=>{o&&r&&(_?S(_):F({userFound:o}))},[S,F,_,o,r]);return function({onSetComponentStyle:e}){l(()=>{function t(t){const{type:o,...n}=t.data,{style:r}=n;"setcomponentstyle"===o&&(null==e||e({style:r}))}return window.addEventListener("message",t),()=>window.removeEventListener("message",t)},[e])}({onSetComponentStyle:u(({style:e})=>{const{fontFace:t}=e;if(_)return;s.current&&(s.current.style.letterSpacing=e.letterSpacing,s.current.style.fontSize=e.fontSize,s.current.style.color=e.color);t&&t.length>0?Promise.all(t.map(e=>{const t=e.src,o=new FontFace(e.fontFamily,t,e.fontFaceDescriptors);return document.fonts.add(o),o.load()})).then(()=>{document.fonts.check(`${e.fontSize} ${e.fontFamily}`)&&s.current&&(s.current.style.fontFamily=e.fontFamily)}).finally(()=>{var t;return w((null==(t=s.current)?void 0:t.style.fontFamily)===e.fontFamily)}).catch(e=>{}):w(!1)},[_,w])}),!(null==n?void 0:n.value)||_?null:y("div",{ref:s,className:g,"data-testid":"prequal-amount-output",children:y(f,{amount:n.value.toString(),currencyFormat:v})})}const F=null==(e=n("target-origin-url"))?void 0:e.toString(),S=null==(t=n("analytics-trace-id"))?void 0:t.toString();var j;j=document.getElementById("app"),o(j).render(y(s,{analyticsTraceId:S,uiSection:r.InstallmentsPrequalAmount,children:y(h,{targetOrigin:F})}));
